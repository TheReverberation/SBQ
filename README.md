# SBQ
## Условие
Представьте себя грузчиком работающим на товарной станции. В течении дня на станцию прибывают поезда и их надо немедленно разгружать.

Для каждого поезда известно:
- номер поезда,
- время прибытия,
- время, которое у вас займёт разгрузка,
- сумма, которую вам заплатят за разгрузку этого поезда.
Начав разгрузку поезда, вы должны ее закончить и не можете разгружать два поезда одновременно.

Необязательно браться за разгрузку всех поездов. На станции есть другие грузчики.

Ваша задача написать алгоритм, который по этим исходным данным максимизирует ваш заработок.

Очень желательны тесты. Было бы прекрасно также получить несколько слов о реализованном алгоритме, его источнике, достоинствах, ограничениях, вычислительной сложности и тп.
## Решение
Решим немного другую, но равнозначную задачу. Пусть вместо времени, которое занимает разгрузка, мы будем знать когда она закончится, т.е. поезд - это кортеж (begin, end, id, cost).

Воспользуемся идеями динамического программирования.
Пусть dp[i] - ответ на задачу, если мы можем работать до i-ого времени(включительно), тогда рассмотрим 2 случая

1) мы не используем вагоны, разгрузка которых заканчивается в i-ое время, тогда ответ на задачу равне ответу для предыдущего момента, т.е. dp[i] = dp[i - 1]
2) мы используем эти вагоны, пусть мы используем вагон v, тогда ответ на задачу dp[i] = dp[v.begin] + v.cost

Получаем формулу:
dp[i] = max{dp[i - 1], dp[v.begin] + v.cost} для всех v: v.end = i
Заметим, что в приведенной выше формуле неважны моменты времени, не являющиеся началом и концом загрузки поездов. Тогда возьмем все используемые моменты времени и пронумеруем их в порядке возрастания.

Оценка сложности, n - кол-во поездов:
1) чтобы занумеровать все моменты времени, понадобится O(nlog(n)) операций
2) вычисляя формулу, мы ровно один раз используем каждый поезд, следовательно, кол-во раз вычисления формулы равно n, а кол-во моментов времени, для которых мы вычисляем формулу не превышает 2n, получаем асимптотику O(n).

Итого O(nlog(n) + n) = O(nlogn), и O(n) - по памяти.

[Код на C++](trains.cpp)
